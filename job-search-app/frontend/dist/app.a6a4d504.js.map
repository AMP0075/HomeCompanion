{"version":3,"sources":["src/templates.js","src/utils.js","src/JobSearch.js","src/app.js"],"names":["jobTemplate","job","currency","title","salary_max","location","display_name","description","redirect_url","extractFormData","form","Array","from","elements","reduce","acc","id","value","getCurrencySymbol","country","currencies","gb","us","au","ca","JobSearch","searchFormSelector","resultsContainerSelector","loadingElementSelector","searchForm","document","querySelector","resultsContainer","loadingElement","countryCode","setCurrencySymbol","fetch","then","results","json","toLowerCase","currencySymbol","addEventListener","event","preventDefault","startLoading","innerHTML","search","response","stopLoading","map","join","jobs","catch","classList","add","remove","jobSearch","setCountryCode","configureFormListener"],"mappings":"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","file":"app.a6a4d504.js","sourceRoot":"..","sourcesContent":["export const jobTemplate = (job, currency) => `\n<div class=\"card\">\n  <div class=\"card-body\">\n  <h4 class=\"card-title\">${job.title} up to ${currency}${job.salary_max}</h4>\n  <h5>${job.location.display_name}</h5>\n  <p class=\"card-text\">${job.description}</p>\n  <a href=\"${job.redirect_url}\">View Job</a>\n  </div>\n</div>\n`;","export const extractFormData = form => Array\n    .from(form.elements)\n    .reduce((acc, { id, value }) => ({ [id]: value, ...acc }), {});\n\nexport const getCurrencySymbol = country => {\n    const currencies = {\n        gb: 'Â£',\n        us: '$',\n        au: '$',\n        ca: '$',\n    };\n    return currencies[country];\n}","import { jobTemplate } from './templates';\nimport { extractFormData, getCurrencySymbol } from './utils';\n\n\nexport class JobSearch {\n\n  constructor(searchFormSelector, resultsContainerSelector, loadingElementSelector) {\n    this.searchForm = document.querySelector(searchFormSelector);\n    this.resultsContainer = document.querySelector(resultsContainerSelector);\n    this.loadingElement = document.querySelector(loadingElementSelector);\n  }\n\n  setCountryCode() {\n    this.countryCode = 'gb';\n    this.setCurrencySymbol();\n\n    fetch('http://ip-api.com/json')\n      .then(results => results.json())\n      .then(results => {\n        this.countryCode = results.countryCode.toLowerCase();\n        this.setCurrencySymbol();\n      });\n  }\n\n  setCurrencySymbol() {\n    this.currencySymbol = getCurrencySymbol(this.countryCode);\n  }\n\n  configureFormListener() {\n    this.searchForm.addEventListener('submit', (event) => {\n    event.preventDefault();\n    this.startLoading();\n    this.resultsContainer.innerHTML = '';\n    const { search, location } = extractFormData(this.searchForm);\n    fetch(`http://localhost:3000/?search=${search}&location=${location}&country=${this.countryCode}`)\n      .then(response => response.json())\n      .then(({ results }) => {\n        this.stopLoading();\n        return results\n          .map(job => jobTemplate(job, this.currencySymbol))\n          .join('');\n      })\n      .then(jobs => this.resultsContainer.innerHTML = jobs)\n      .catch(() => this.stopLoading());\n    });\n  }\n\n  startLoading() {\n    this.loadingElement.classList.add('loading');\n  }\n\n  stopLoading() {\n    this.loadingElement.classList.remove('loading');\n  }\n}\n\n","import { JobSearch } from './JobSearch';\n\nconst jobSearch = new JobSearch('#search-form', '.result-container', '.loading-element');\njobSearch.setCountryCode();\njobSearch.configureFormListener();\n"]}